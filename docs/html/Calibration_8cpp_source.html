<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChArUco Board を使ったカメラキャリブレーション: Calibration.cpp ソースファイル</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="wakayama-univ.ico"/></td>
  <td id="projectalign">
   <div id="projectname">ChArUco Board を使ったカメラキャリブレーション<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">OpenGL と OpenCV の連携サンプル</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','検索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">読み取り中…</div>
<div class="SRStatus" id="Searching">検索中…</div>
<div class="SRStatus" id="NoMatches">一致する文字列を見つけられません</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Calibration.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="Calibration_8cpp.html">[詳解]</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;<a class="code" href="Calibration_8h.html">Calibration.h</a>&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// OpenCV</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;opencv2/calib3d.hpp&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">// 標準ライブラリ</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">//</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// コンストラクタ</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">//</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="classCalibration.html#afd74a10d0232f67bafe4f80eb01bf4ed">   20</a></span><a class="code hl_function" href="classCalibration.html#afd74a10d0232f67bafe4f80eb01bf4ed">Calibration::Calibration</a>(<span class="keyword">const</span> std::string&amp; dictionaryName)</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>{</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>  <span class="comment">// ArUco Marker の辞書を選択する</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>  <a class="code hl_function" href="classCalibration.html#a8f10e273f5d2340c32f245cd28d4452e">setDictionary</a>(dictionaryName);</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>}</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment">//</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">//  デストラクタ</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment">//</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="classCalibration.html#a108efb6ccd8c98e5cac950be4bf0ac26">   29</a></span><a class="code hl_function" href="classCalibration.html#a108efb6ccd8c98e5cac950be4bf0ac26">Calibration::~Calibration</a>()</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>{</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>}</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment">//</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="comment">// ChArUco Board を作成する</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="comment">//</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="classCalibration.html#ab7219e04fe87f2f2b2113e806081e933">   36</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCalibration.html#ab7219e04fe87f2f2b2113e806081e933">Calibration::createBoard</a>(std::array&lt;float, 2&gt;&amp; size)</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>{</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>  <span class="comment">// キャリブレーション用の ChArUco Board を作成する</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>  board = <span class="keyword">new</span> cv::aruco::CharucoBoard(cv::Size(10, 7),</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    size[0] * 0.01f, size[1] * 0.01f, dictionary);</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  <span class="comment">// キャリブレーション用の ChArUco Board の検出器を作成する</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>  boardDetector = <span class="keyword">new</span> cv::aruco::CharucoDetector(*board);</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>}</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment">//</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="comment">//  ArUco Marker の辞書と検出器を設定する</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="comment">//</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="classCalibration.html#a8f10e273f5d2340c32f245cd28d4452e">   49</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCalibration.html#a8f10e273f5d2340c32f245cd28d4452e">Calibration::setDictionary</a>(<span class="keyword">const</span> std::string&amp; dictionaryName)</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>{</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  <span class="comment">// ArUco Marker の辞書を検索する</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  <span class="keyword">auto</span> dictionaryItem{ <a class="code hl_variable" href="classCalibration.html#aec7011fac8acc0dc8d95e5e5734daa43">dictionaryList</a>.find(dictionaryName) };</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>  <span class="comment">// ArUco Marker の辞書が見つからなかったら辞書リストの最初の辞書を使う</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>  <span class="keywordflow">if</span> (dictionaryItem == <a class="code hl_variable" href="classCalibration.html#aec7011fac8acc0dc8d95e5e5734daa43">dictionaryList</a>.end()) dictionaryItem = <a class="code hl_variable" href="classCalibration.html#aec7011fac8acc0dc8d95e5e5734daa43">dictionaryList</a>.begin();</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  <span class="comment">// ArUco Marker の辞書を設定する</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  dictionary = cv::aruco::getPredefinedDictionary(dictionaryItem-&gt;second);</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  <span class="comment">// ArUco Marker の検出器を作成する</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  cv::aruco::DetectorParameters detectorParams = cv::aruco::DetectorParameters();</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>  detector = <span class="keyword">new</span> cv::aruco::ArucoDetector(dictionary, detectorParams);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <span class="comment">// キャリブレーション用の ChArUco Board を作成する</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  <a class="code hl_function" href="classCalibration.html#ab7219e04fe87f2f2b2113e806081e933">createBoard</a>(std::array&lt;float, 2&gt;{ 4.0f, 2.0f });</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>}</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment">//</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment">// ChArUco Board を描く</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment">//</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="classCalibration.html#ab8891d9d344fa2859050b828441d822a">   71</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCalibration.html#ab8891d9d344fa2859050b828441d822a">Calibration::drawBoard</a>(cv::Mat&amp; boardImage, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>{</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  boardDetector-&gt;getBoard().generateImage(cv::Size(width, height), boardImage, 10, 1);</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>}</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment">//</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment">// ArUco Marker を検出する</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="comment">//</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="classCalibration.html#aee8427112dcaf020690f0a2801aeb8d2">   79</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classCalibration.html#aee8427112dcaf020690f0a2801aeb8d2">Calibration::detect</a>(<a class="code hl_class" href="classTexture.html">Texture</a>&amp; texture, <span class="keywordtype">bool</span> detectBoard)</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>{</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  <span class="comment">// ピクセルバッファオブジェクトを CPU のメモリ空間にマップする</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  cv::Mat image{ texture.<a class="code hl_function" href="classTexture.html#a9de1ccaac766fed8a199938e1d6323df">getSize</a>(), CV_8UC3, texture.<a class="code hl_function" href="classTexture.html#a5598c0f32dade675baadefa18d691762">mapBuffer</a>() };</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <span class="comment">// ArUco Marker を検出する</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  detector-&gt;detectMarkers(image, corners, ids, rejected);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  <span class="comment">// 検出結果をピクセルバッファオブジェクトに描き込む</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  cv::aruco::drawDetectedMarkers(image, corners, ids);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  <span class="comment">// ChArUco Board の検出を行っているのなら</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  <span class="keywordflow">if</span> (detectBoard)</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  {</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">// 既に検出された ArUco Marker と ChArUco Board のレイアウトを使って検出されなかった ArUco Marker を再検出する</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    detector-&gt;refineDetectedMarkers(image, *board, corners, ids, rejected);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">// ArUco Marker が検出されたら</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">if</span> (!corners.empty())</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>      <span class="comment">// ArUco Marker を使って ChArUco Board の角を検出する</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>      cv::aruco::interpolateCornersCharuco(corners, ids, image, board, charucoCorners, charucoIds);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>      <span class="comment">//boardDetector-&gt;detectBoard(buffer, currentCharucoCorners, currentCharucoIds);</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>      <span class="comment">//boardDetector-&gt;getBoard().matchImagePoints(</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>      <span class="comment">//  currentCharucoCorners, currentCharucoIds,</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>      <span class="comment">//  currentObjectPoints, currentImagePoints</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>      <span class="comment">//);</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>      <span class="comment">// ChArUco Board の角の位置を表示に描き込む</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>      cv::aruco::drawDetectedCornersCharuco(image, charucoCorners, charucoIds, cv::Scalar(0, 0, 255));</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  <span class="comment">// ピクセルバッファオブジェクトのマップを解除する</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  texture.<a class="code hl_function" href="classTexture.html#a661aa9f2cfe4e77ad9b0fa839f3e2556">unmapBuffer</a>();</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  <span class="comment">// マーカが見つかれば true を返す</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  <span class="keywordflow">return</span> !corners.empty();</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>}</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment">//</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment">// 標本を取得する</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment">//</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="classCalibration.html#ae7489b363da478ede1d01609dfe6e659">  122</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCalibration.html#ae7489b363da478ede1d01609dfe6e659">Calibration::extractSample</a>()</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>{</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  <span class="comment">// ChArUco Board の角が４つ以上見つかれば</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="keywordflow">if</span> (charucoCorners.total() &gt;= 4)</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>  {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="comment">// ChArUco Board の角を記録する</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    allCorners.push_back(charucoCorners);</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    allIds.push_back(charucoIds);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  }</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="preprocessor">#if defined(DEBUG)</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  std::cerr &lt;&lt; <span class="stringliteral">&quot;charucoCorners = &quot;</span> &lt;&lt; charucoCorners.total() &lt;&lt; <span class="stringliteral">&quot;, allCorners = &quot;</span> &lt;&lt; allCorners.size() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  <span class="comment">// ChArUco Board の角を破棄する</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>  charucoCorners.release();</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  charucoIds.release();</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>}</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="comment">//</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="comment">// 標本を消去する</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span><span class="comment">//</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno"><a class="line" href="classCalibration.html#aab7b89b4f1d93db0f2b24acc93bc8e23">  143</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCalibration.html#aab7b89b4f1d93db0f2b24acc93bc8e23">Calibration::discardSamples</a>()</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>{</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="comment">// 記録した標本を消去する</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  allCorners.clear();</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  allIds.clear();</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <span class="comment">// 較正の計算結果を消去する</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  cameraMatrix.release();</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  distCoeffs.release();</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>}</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment">//</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="comment">// 較正する</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span><span class="comment">//</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="classCalibration.html#a654ff7d2a82bb8ac34c5711843ea496e">  157</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="classCalibration.html#a654ff7d2a82bb8ac34c5711843ea496e">Calibration::calibrate</a>(<span class="keyword">const</span> cv::Size&amp; size)</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>{</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="comment">// 再投影誤差</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  <span class="keywordtype">double</span> repError{ 0.0f };</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  <span class="comment">// 交点を合計６つ以上検出できていれば</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>  <span class="keywordflow">if</span> (allCorners.size() &gt;= 6) <span class="keywordflow">try</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  {</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="comment">// ChArUco Board の姿勢</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    std::vector&lt;cv::Mat&gt; boardRvecs, boardTvecs;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="comment">// 取得した全ての交点からカメラパラメータを推定する</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    repError = cv::aruco::calibrateCameraCharuco(allCorners, allIds, board, size,</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>      cameraMatrix, distCoeffs, boardRvecs, boardRvecs);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="comment">//int calibrationFlags = 0</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="comment">//  //| cv::CALIB_USE_INTRINSIC_GUESS // cameraMatrix contains valid initial values of fx, fy, cx, cy that are optimized further.Otherwise, (cx, cy) is initially set to the image center(imageSize is used), and focal distances are computed in a least - squares fashion.Note, that if intrinsic parameters are known, there is no need to use this function just to estimate extrinsic parameters.Use solvePnP instead.</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">//  //| cv::CALIB_FIX_PRINCIPAL_POINT // The principal point is not changed during the global optimization.It stays at the center or at a different location specified when CALIB_USE_INTRINSIC_GUESS is set too.</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="comment">//  //| cv::CALIB_FIX_ASPECT_RATIO    // The functions consider only fy as a free parameter.The ratio fx / fy stays the same as in the input cameraMatrix.When CALIB_USE_INTRINSIC_GUESS is not set, the actual input values of fx and fy are ignored, only their ratio is computed and used further.</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">//  //| cv::CALIB_ZERO_TANGENT_DIST   // Tangential distortion coefficients(p1, p2) are set to zeros and stay zero.</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="comment">//  //| cv::CALIB_FIX_FOCAL_LENGTH    // The focal length is not changed during the global optimization if CALIB_USE_INTRINSIC_GUESS is set.</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="comment">//  //| cv::CALIB_FIX_K1              // , ..., CALIB_FIX_K6 The corresponding radial distortion coefficient is not changed during the optimization.If CALIB_USE_INTRINSIC_GUESS is set, the coefficient from the supplied distCoeffs matrix is used.Otherwise, it is set to 0.</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="comment">//  //| cv::CALIB_RATIONAL_MODEL      // Coefficients k4, k5, and k6 are enabled.To provide the backward compatibility, this extra flag should be explicitly specified to make the calibration function use the rational model and return 8 coefficients or more.</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="comment">//  //| cv::CALIB_THIN_PRISM_MODEL    //  Coefficients s1, s2, s3 and s4 are enabled.To provide the backward compatibility, this extra flag should be explicitly specified to make the calibration function use the thin prism model and return 12 coefficients or more.</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="comment">//  //| cv::CALIB_FIX_S1_S2_S3_S4     // The thin prism distortion coefficients are not changed during the optimization.If CALIB_USE_INTRINSIC_GUESS is set, the coefficient from the supplied distCoeffs matrix is used.Otherwise, it is set to 0.</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="comment">//  //| cv::CALIB_TILTED_MODEL        // Coefficients tauX and tauY are enabled.To provide the backward compatibility, this extra flag should be explicitly specified to make the calibration function use the tilted sensor model and return 14 coefficients.</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="comment">//  //| cv::CALIB_FIX_TAUX_TAUY       // The coefficients of the tilted sensor model are not changed during the optimization.If CALIB_USE_INTRINSIC_GUESS is set, the coefficient from the supplied distCoeffs matrix is used.Otherwise, it is set to 0.</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="comment">//  ;</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="comment">//repError = cv::calibrateCamera(</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="comment">//  allObjectPoints, allImagePoints, getSize(),</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">//  cameraMatrix, distCoeffs, boardRvecs, boardRvecs, cv::noArray(),</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="comment">//  cv::noArray(), cv::noArray(), calibrationFlags);</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  <span class="keywordflow">catch</span> (<span class="keyword">const</span> cv::Exception)</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// 収束しなかった場合は計算結果を捨てる</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    cameraMatrix.release();</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    distCoeffs.release();</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  }</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <span class="comment">// 較正</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  <span class="keywordflow">return</span> repError;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>}</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="comment">//</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment">// 較正結果を使ってマーカの座標軸を描く</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="comment">// </span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno"><a class="line" href="classCalibration.html#a5426fd307195a0a3129666986fa5bf1f">  204</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCalibration.html#a5426fd307195a0a3129666986fa5bf1f">Calibration::drawFrameAxes</a>(<a class="code hl_class" href="classTexture.html">Texture</a>&amp; texture, std::map&lt;int, GgMatrix&gt;&amp; poses)</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>{</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  <span class="comment">// 較正が完了していれば</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classCalibration.html#a8fc720d7c53e47c0486f18bb02e4126b">finished</a>())</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    std::vector&lt;cv::Vec3d&gt; rvecs, tvecs;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="comment">// 全てのマーカの姿勢を推定して</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    cv::aruco::estimatePoseSingleMarkers(corners, 0.05f, cameraMatrix, distCoeffs, rvecs, tvecs);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="comment">// ピクセルバッファオブジェクトを CPU のメモリ空間にマップする</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    cv::Mat image{ texture.<a class="code hl_function" href="classTexture.html#a9de1ccaac766fed8a199938e1d6323df">getSize</a>(), CV_8UC3, texture.<a class="code hl_function" href="classTexture.html#a5598c0f32dade675baadefa18d691762">mapBuffer</a>() };</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="comment">// 個々のマーカについて</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <span class="keywordflow">for</span> (<span class="keyword">decltype</span>(rvecs.size()) n = 0; n &lt; rvecs.size(); ++n)</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>      <span class="comment">// 回転角を求める</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>      <span class="keyword">const</span> <span class="keyword">auto</span> r{ cv::norm(rvecs[n]) };</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>      <span class="comment">// 回転軸ベクトルを正規化する</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>      rvecs[n] /= r;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>      <span class="comment">// 回転軸ベクトル</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>      <span class="keyword">const</span> <span class="keyword">auto</span> rx{ <span class="keyword">static_cast&lt;</span>GLfloat<span class="keyword">&gt;</span>(rvecs[n][0]) };</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>      <span class="keyword">const</span> <span class="keyword">auto</span> ry{ <span class="keyword">static_cast&lt;</span>GLfloat<span class="keyword">&gt;</span>(rvecs[n][1]) };</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>      <span class="keyword">const</span> <span class="keyword">auto</span> rz{ <span class="keyword">static_cast&lt;</span>GLfloat<span class="keyword">&gt;</span>(rvecs[n][2]) };</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>      <span class="comment">// 平行移動量</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>      <span class="keyword">const</span> <span class="keyword">auto</span> tx{ <span class="keyword">static_cast&lt;</span>GLfloat<span class="keyword">&gt;</span>(tvecs[n][0]) };</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>      <span class="keyword">const</span> <span class="keyword">auto</span> ty{ <span class="keyword">static_cast&lt;</span>GLfloat<span class="keyword">&gt;</span>(tvecs[n][1]) };</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>      <span class="keyword">const</span> <span class="keyword">auto</span> tz{ <span class="keyword">static_cast&lt;</span>GLfloat<span class="keyword">&gt;</span>(tvecs[n][2]) };</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>      <span class="comment">// 各マーカの姿勢を求める</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>      poses[ids[n]] = <a class="code hl_function" href="namespacegg.html#a1c44cf87582b032f9eeac980ed17f73b">ggTranslate</a>(tx, ty, tz).<a class="code hl_function" href="classgg_1_1GgMatrix.html#a80f59d17bddcffd528ea6b99e4a2ed75">rotate</a>(rx, ry, rz, <span class="keyword">static_cast&lt;</span>GLfloat<span class="keyword">&gt;</span>(r));</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>      <span class="comment">// 座標軸を描く</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>      cv::drawFrameAxes(image, cameraMatrix, distCoeffs, rvecs[n], tvecs[n], 0.1f);</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    }</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <span class="comment">// ピクセルバッファオブジェクトのマップを解除する</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    texture.<a class="code hl_function" href="classTexture.html#a661aa9f2cfe4e77ad9b0fa839f3e2556">unmapBuffer</a>();</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>  }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>}</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">// ArUco Marker 辞書のリスト</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="keyword">const</span> std::map&lt;const std::string, const cv::aruco::PredefinedDictionaryType&gt; <a class="code hl_variable" href="classCalibration.html#aec7011fac8acc0dc8d95e5e5734daa43">Calibration::dictionaryList</a></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>{</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  { <span class="stringliteral">&quot;DICT_4X4_50&quot;</span>, cv::aruco::DICT_4X4_50 },</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  { <span class="stringliteral">&quot;DICT_4X4_100&quot;</span>, cv::aruco::DICT_4X4_100 },</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>  { <span class="stringliteral">&quot;DICT_4X4_250&quot;</span>, cv::aruco::DICT_4X4_250 },</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>  { <span class="stringliteral">&quot;DICT_4X4_1000&quot;</span>, cv::aruco::DICT_4X4_1000 },</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>  { <span class="stringliteral">&quot;DICT_5X5_50&quot;</span>, cv::aruco::DICT_5X5_50 },</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  { <span class="stringliteral">&quot;DICT_5X5_100&quot;</span>, cv::aruco::DICT_5X5_100 },</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>  { <span class="stringliteral">&quot;DICT_5X5_250&quot;</span>, cv::aruco::DICT_5X5_250 },</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>  { <span class="stringliteral">&quot;DICT_5X5_1000&quot;</span>, cv::aruco::DICT_5X5_1000 },</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  { <span class="stringliteral">&quot;DICT_6X6_50&quot;</span>, cv::aruco::DICT_6X6_50 },</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  { <span class="stringliteral">&quot;DICT_6X6_100&quot;</span>, cv::aruco::DICT_6X6_100 },</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  { <span class="stringliteral">&quot;DICT_6X6_250&quot;</span>, cv::aruco::DICT_6X6_250 },</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>  { <span class="stringliteral">&quot;DICT_6X6_1000&quot;</span>, cv::aruco::DICT_6X6_1000 },</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>  { <span class="stringliteral">&quot;DICT_7X7_50&quot;</span>, cv::aruco::DICT_7X7_50 },</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>  { <span class="stringliteral">&quot;DICT_7X7_100&quot;</span>, cv::aruco::DICT_7X7_100 },</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  { <span class="stringliteral">&quot;DICT_7X7_250&quot;</span>, cv::aruco::DICT_7X7_250 },</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  { <span class="stringliteral">&quot;DICT_7X7_1000&quot;</span>, cv::aruco::DICT_7X7_1000 },</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  { <span class="stringliteral">&quot;DICT_ARUCO_ORIGINAL&quot;</span>, cv::aruco::DICT_ARUCO_ORIGINAL },</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  { <span class="stringliteral">&quot;DICT_APRILTAG_16h5&quot;</span>, cv::aruco::DICT_APRILTAG_16h5 },</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  { <span class="stringliteral">&quot;DICT_APRILTAG_25h9&quot;</span>, cv::aruco::DICT_APRILTAG_25h9 },</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  { <span class="stringliteral">&quot;DICT_APRILTAG_36h10&quot;</span>, cv::aruco::DICT_APRILTAG_36h10 },</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  { <span class="stringliteral">&quot;DICT_APRILTAG_36h11&quot;</span>, cv::aruco::DICT_APRILTAG_36h11 }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>};</div>
<div class="ttc" id="aCalibration_8h_html"><div class="ttname"><a href="Calibration_8h.html">Calibration.h</a></div></div>
<div class="ttc" id="aclassCalibration_html_a108efb6ccd8c98e5cac950be4bf0ac26"><div class="ttname"><a href="classCalibration.html#a108efb6ccd8c98e5cac950be4bf0ac26">Calibration::~Calibration</a></div><div class="ttdeci">virtual ~Calibration()</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00029">Calibration.cpp:29</a></div></div>
<div class="ttc" id="aclassCalibration_html_a5426fd307195a0a3129666986fa5bf1f"><div class="ttname"><a href="classCalibration.html#a5426fd307195a0a3129666986fa5bf1f">Calibration::drawFrameAxes</a></div><div class="ttdeci">void drawFrameAxes(Texture &amp;texture, std::map&lt; int, GgMatrix &gt; &amp;poses)</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00204">Calibration.cpp:204</a></div></div>
<div class="ttc" id="aclassCalibration_html_a654ff7d2a82bb8ac34c5711843ea496e"><div class="ttname"><a href="classCalibration.html#a654ff7d2a82bb8ac34c5711843ea496e">Calibration::calibrate</a></div><div class="ttdeci">double calibrate(const cv::Size &amp;size)</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00157">Calibration.cpp:157</a></div></div>
<div class="ttc" id="aclassCalibration_html_a8f10e273f5d2340c32f245cd28d4452e"><div class="ttname"><a href="classCalibration.html#a8f10e273f5d2340c32f245cd28d4452e">Calibration::setDictionary</a></div><div class="ttdeci">void setDictionary(const std::string &amp;dictionaryName)</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00049">Calibration.cpp:49</a></div></div>
<div class="ttc" id="aclassCalibration_html_a8fc720d7c53e47c0486f18bb02e4126b"><div class="ttname"><a href="classCalibration.html#a8fc720d7c53e47c0486f18bb02e4126b">Calibration::finished</a></div><div class="ttdeci">auto finished()</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8h_source.html#l00168">Calibration.h:168</a></div></div>
<div class="ttc" id="aclassCalibration_html_aab7b89b4f1d93db0f2b24acc93bc8e23"><div class="ttname"><a href="classCalibration.html#aab7b89b4f1d93db0f2b24acc93bc8e23">Calibration::discardSamples</a></div><div class="ttdeci">void discardSamples()</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00143">Calibration.cpp:143</a></div></div>
<div class="ttc" id="aclassCalibration_html_ab7219e04fe87f2f2b2113e806081e933"><div class="ttname"><a href="classCalibration.html#ab7219e04fe87f2f2b2113e806081e933">Calibration::createBoard</a></div><div class="ttdeci">void createBoard(std::array&lt; float, 2 &gt; &amp;length)</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00036">Calibration.cpp:36</a></div></div>
<div class="ttc" id="aclassCalibration_html_ab8891d9d344fa2859050b828441d822a"><div class="ttname"><a href="classCalibration.html#ab8891d9d344fa2859050b828441d822a">Calibration::drawBoard</a></div><div class="ttdeci">void drawBoard(cv::Mat &amp;boardImage, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00071">Calibration.cpp:71</a></div></div>
<div class="ttc" id="aclassCalibration_html_ae7489b363da478ede1d01609dfe6e659"><div class="ttname"><a href="classCalibration.html#ae7489b363da478ede1d01609dfe6e659">Calibration::extractSample</a></div><div class="ttdeci">void extractSample()</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00122">Calibration.cpp:122</a></div></div>
<div class="ttc" id="aclassCalibration_html_aec7011fac8acc0dc8d95e5e5734daa43"><div class="ttname"><a href="classCalibration.html#aec7011fac8acc0dc8d95e5e5734daa43">Calibration::dictionaryList</a></div><div class="ttdeci">static const std::map&lt; const std::string, const cv::aruco::PredefinedDictionaryType &gt; dictionaryList</div><div class="ttdoc">ArUco Marker 辞書のリスト</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8h_source.html#l00182">Calibration.h:182</a></div></div>
<div class="ttc" id="aclassCalibration_html_aee8427112dcaf020690f0a2801aeb8d2"><div class="ttname"><a href="classCalibration.html#aee8427112dcaf020690f0a2801aeb8d2">Calibration::detect</a></div><div class="ttdeci">bool detect(Texture &amp;texture, bool detectBoard)</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00079">Calibration.cpp:79</a></div></div>
<div class="ttc" id="aclassCalibration_html_afd74a10d0232f67bafe4f80eb01bf4ed"><div class="ttname"><a href="classCalibration.html#afd74a10d0232f67bafe4f80eb01bf4ed">Calibration::Calibration</a></div><div class="ttdeci">Calibration(const std::string &amp;dictionaryName)</div><div class="ttdef"><b>Definition:</b> <a href="Calibration_8cpp_source.html#l00020">Calibration.cpp:20</a></div></div>
<div class="ttc" id="aclassTexture_html"><div class="ttname"><a href="classTexture.html">Texture</a></div><div class="ttdef"><b>Definition:</b> <a href="Texture_8h_source.html#l00024">Texture.h:25</a></div></div>
<div class="ttc" id="aclassTexture_html_a5598c0f32dade675baadefa18d691762"><div class="ttname"><a href="classTexture.html#a5598c0f32dade675baadefa18d691762">Texture::mapBuffer</a></div><div class="ttdeci">auto mapBuffer() const</div><div class="ttdef"><b>Definition:</b> <a href="Texture_8h_source.html#l00245">Texture.h:245</a></div></div>
<div class="ttc" id="aclassTexture_html_a661aa9f2cfe4e77ad9b0fa839f3e2556"><div class="ttname"><a href="classTexture.html#a661aa9f2cfe4e77ad9b0fa839f3e2556">Texture::unmapBuffer</a></div><div class="ttdeci">void unmapBuffer() const</div><div class="ttdef"><b>Definition:</b> <a href="Texture_8h_source.html#l00264">Texture.h:264</a></div></div>
<div class="ttc" id="aclassTexture_html_a9de1ccaac766fed8a199938e1d6323df"><div class="ttname"><a href="classTexture.html#a9de1ccaac766fed8a199938e1d6323df">Texture::getSize</a></div><div class="ttdeci">const auto &amp; getSize() const</div><div class="ttdef"><b>Definition:</b> <a href="Texture_8h_source.html#l00164">Texture.h:164</a></div></div>
<div class="ttc" id="aclassgg_1_1GgMatrix_html_a80f59d17bddcffd528ea6b99e4a2ed75"><div class="ttname"><a href="classgg_1_1GgMatrix.html#a80f59d17bddcffd528ea6b99e4a2ed75">gg::GgMatrix::rotate</a></div><div class="ttdeci">GgMatrix rotate(GLfloat x, GLfloat y, GLfloat z, GLfloat a) const</div><div class="ttdef"><b>Definition:</b> <a href="gg_8h_source.html#l02807">gg.h:2807</a></div></div>
<div class="ttc" id="anamespacegg_html_a1c44cf87582b032f9eeac980ed17f73b"><div class="ttname"><a href="namespacegg.html#a1c44cf87582b032f9eeac980ed17f73b">gg::ggTranslate</a></div><div class="ttdeci">GgMatrix ggTranslate(GLfloat x, GLfloat y, GLfloat z, GLfloat w=1.0f)</div><div class="ttdef"><b>Definition:</b> <a href="gg_8h_source.html#l03100">gg.h:3100</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
2024年03月30日(土) 12時36分56秒作成 - ChArUco Board を使ったカメラキャリブレーション / 構成: &#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
